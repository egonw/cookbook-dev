
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>d3-selection</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mermaid.js"></script>
    <script src="../../_static/mermaid.core.js"></script>
    <script src="../../_static/mermaid.min.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "FAIRplus/the-fair-cookbook");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "💬 comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://fairplus.github.io/the-fair-cookbook/node_modules/d3-selection/README.html" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://fairplus.github.io/the-fair-cookbook/node_modules/d3-selection/README.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="d3-selection" />
<meta property="og:description" content="d3-selection  Selections allow powerful data-driven transformation of the document object model (DOM): set attributes, styles, properties, HTML or text content," />
<meta property="og:image"       content="https://fairplus.github.io/the-fair-cookbook/_static/cookbook-logo-small.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/cookbook-logo-small.png" class="logo" alt="logo">
  
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../content/home.html">
   FAIR Cookbook
  </a>
 </li>
</ul>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/introduction.html">
   Introduction
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/ATI-turingway.html">
     1. The Turing Way Book of Data Science
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/FAIR-cookbook-audience.html">
     2. Who should read the FAIR Cookbook?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/brief-FAIR-principles.html">
     3. What are the FAIR Principles?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/what-is-IMI.html">
     4. What is IMI?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/FAIR-in-IMI-context.html">
     5. FAIR in the context of IMI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/IMI-Data-Access-Request-Process.html">
     6. Engaging with IMI Projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/FAIRplus-values.html">
     7. The Ethical Values behind FAIR and the FAIRPlus project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/introduction/data-sharing-models.html">
     8. High level data sharing models
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/assessing-fairness.html">
   Assessing FAIR
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/Data-Management-Maturity-Model.html">
     1. Data Management Maturity Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/Datasets-Maturity-Model.html">
     2. FAIRplus Datasets Maturity Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/Data-Usage-Areas.html">
     3. Data Usage Areas
    </a>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/assessing-fairness/fair-indicators.html">
     4. FAIR Indicators
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/RDA-Indicators.html">
       4.4.1. RDA Indicators
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/FAIRPlus-Indicators.html">
       4.4.2. IMI FAIRPlus Indicators
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/assessing-fairness/manual-fair-assessment.html">
     5. FAIR assessment by hand
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/evaluation-method.html">
       5.4.1. Evaluation Method
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/assessing-fairness/cmmi/rda-evaluation.html">
       5.4.2. RDA Evaluation Methods
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/assessing-fairness/automatic-fair-assessment.html">
     6. FAIR assessment by software
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/assessing-fairness/fair-assessment-fairevaluator.html">
       6.4.1. Assessing FAIRness with FAIREvaluator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/assessing-fairness/fair-assessment-fairshake.html">
       6.4.2. FAIR assessment with FAIRShake
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/infrastructure.html">
   Infrastructure for FAIR
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/infrastructure/id-resolution.html">
     1. Identifier resolution services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/infrastructure/data-catalog.html">
     2. Building a Dataset Catalogue
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/infrastructure/data-catalog-deployment.html">
     3. Deploying the IMI data catalogue
    </a>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/infrastructure/vocabularies.html">
     4. Vocabularies and Terminology Infrastructure
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/infrastructure/vocabularies/technical-and-architectural-selection-criteria-of-ontology-lookup-services.html">
       4.1. Technical &amp; architectural selection criteria of ontology lookup services
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/infrastructure/vocabularies/Selecting_and_using_ontology_lookup_services.html">
       4.2. Selection and exploitation of Ontology Lookup Services
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/infrastructure/vocabularies/UC3_R13_local_ontology_services.html">
       4.3. How to deploy a terminology service - EBI Ontology Lookup Service
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/findability.html">
   Improving Findability
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/findability/identifiers.html">
     1. How to generate globally unique, resolvable and persistent identifiers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/infrastructure/chemical-identities.html">
     2. Chemical Identity - InChi and SMILES
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/findability/identifiers-minids.html">
     3. Identifier Minting Service with Minid Client
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/findability/zenodo-deposition.html">
     4. Deposition to Zenodo Archive
    </a>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/findability/seo.html">
     5. Findability: Search Engine Optimization
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/findability/seo/bioschemas-data-page.html">
       5.8.1. Findability: Data Page Markup with Bioschemas
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/findability/seo/bioschemas-dataset.html">
       5.8.2. Findability: Dataset Markup
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/findability/seo/bioschemas-datacatalog.html">
       5.8.3. Findability: Data Catalog Markup
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/accessibility.html">
   Improving Accessibility
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/accessibility/anonymization.html">
     1. Anonymizing Patient Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/accessibility/how-to-use-sftp-for-transfer.html">
     2. How to use SFTP to transfer data files between institutions.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/accessibility/aspera.html">
     3. How to download files with Aspera
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/interoperability.html">
   Improving Interoperability
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/interoperability/selecting-ontologies.html">
     Which vocabulary to use?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/interoperability/ontology-new-term-request-recipe.html">
     Requesting terms addition to terminology artefacts
    </a>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/interoperability/ontology-robot-recipe.html">
     Building an application ontology with Robot
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/interoperability/ontology-robot/MSIO-robot-build-process.html">
       MSIO, an application ontology for Metabolomics
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/interoperability/creating-minimal-metadata-profiles.html">
     Creating a Metadata Profile
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/interoperability/transcriptomics-metadata.html">
       Establishing a Metadata Profile for Transcriptomics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/interoperability/covid19-sample-metadata-profile-shex-use-case.html">
       Metadata Profile Validation in RDF with Shape Expression:
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/interoperability/from-proprietary-to-open-standard-mzml-exemplar.html">
     From proprietary to open standard data format
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/interoperability/fastq-file-format-validators.html">
     File format validation, an example with FASTQ files
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/reusability.html">
   Improving Reusability
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/reusability/ATI-licensing.html">
     1. Licensing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/reusability/ATI_licensing_software.html">
     2. Software Licenses
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/reusability/ATI_licensing_data.html">
     3. Data Licenses
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/reusability/expressing-data-use.html">
     4. Patterns and practice for expressing allowed data usage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/reusability/provenance.html">
     5. Provenance Information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/reusability/community-standards.html">
     6. Compliance with community annotation standards
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/applied-examples.html">
   Making IMI data FAIR
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="../../content/recipes/applied-examples/fair-data-matrix-recipe.html">
     Making a Data Matrix FAIR
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/applied-examples/fair-data-matrix/0-rose-metabolites-Python-data-handling.html">
       Bibliographic Reference:
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/applied-examples/fair-data-matrix/1-rose-metabolites-Python-analysis.html">
       Exploring and comparing Rose Scent profiles stored as tabular data packages with plotnine, a python port of R ggplot2
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/applied-examples/fair-data-matrix/2-rose-metabolites-Python-RDF-querying-analysis.html">
       Exploring a rose garden with SPARQL
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../content/recipes/applied-examples/fair-data-matrix/3-rose-metabolites-R-analysis.html">
       Exploring and comparing Rose Scent profiles stored as tabular data packages with ggplot2 R library
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/applied-examples/etox_raw/FAIRplus_Recipe_Ontology_mapping_the_eTox_dataset_scenario.html">
     Data normalization and integration through entity linking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/applied-examples/nd4bb_raw/FAIRification_CookBook_Recipe1_V02.html">
     ND4BB dataset FAIRification recipe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/applied-examples/oncotrack_raw/rawRecipe-oncotrack.html">
     Oncotrack FAIRification recipe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/applied-examples/resolute_raw/rawRecipe_resolute.html">
     RESOLUTE FAIRification Recipe
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../content/recipes/glossary-fair-terms.html">
   Glossary of FAIR things
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/help.html">
   Help
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/help/tips-tricks.html">
     1. Recipe Tips and Tricks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/help/recipe-template.html">
     2. Recipe Template
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/help/how-to-create-recipe-with-gdoc.html">
     3. Using GoogleDocs to contribute a FAIR Cookbook Recipe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/help/how-to-create-recipe-with-hackmd.html">
     4. How to use HackMD to write a FAIR Cookbook Recipe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/help/how-to-create-recipe-with-git.html">
     5. How to create a FAIRPlus Coobook Recipe ?
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../content/recipes/boilerplate.html">
   Miscellaneous
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/license.html">
     1. License for this book
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/people.html">
     2. FAIR Cookbook Steering Council and Institutional Partners
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/governance.html">
     3. FAIR Cookbook Governance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/code_of_conduct.html">
     4. FAIR Cookbook Code of Conduct
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/project_information.html">
     5. FAIR CookBook BoilerPlate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/roadmap.html">
     6. FAIR cookbook development roadmap
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/contributing.html">
     7. Contributing to the FAIR cookbook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../content/recipes/boilerplate/disclaimer.html">
     8. Disclaimer
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/node_modules/d3-selection/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/FAIRplus/the-fair-cookbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/FAIRplus/the-fair-cookbook/issues/new?title=Issue%20on%20page%20%2Fnode_modules/d3-selection/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/FAIRplus/the-fair-cookbook/edit/migrating/node_modules/d3-selection/README.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing">
   Installing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-reference">
   API Reference
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#selecting-elements">
     Selecting Elements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modifying-elements">
     Modifying Elements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#joining-data">
     Joining Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#handling-events">
     Handling Events
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#control-flow">
     Control Flow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#local-variables">
     Local Variables
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#namespaces">
     Namespaces
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="d3-selection">
<h1>d3-selection<a class="headerlink" href="#d3-selection" title="Permalink to this headline">¶</a></h1>
<p>Selections allow powerful data-driven transformation of the document object model (DOM): set <a class="reference external" href="#selection_attr">attributes</a>, <a class="reference external" href="#selection_style">styles</a>, <a class="reference external" href="#selection_property">properties</a>, <a class="reference external" href="#selection_html">HTML</a> or <a class="reference external" href="#selection_text">text</a> content, and more. Using the <a class="reference external" href="#joining-data">data join</a>’s <a class="reference external" href="#selection_enter">enter</a> and <a class="reference external" href="#selection_enter">exit</a> selections, you can also <a class="reference external" href="#selection_append">add</a> or <a class="reference external" href="#selection_remove">remove</a> elements to correspond to data.</p>
<p>Selection methods typically return the current selection, or a new selection, allowing the concise application of multiple operations on a given selection via method chaining. For example, to set the class and color style of all paragraph elements in the current document:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;graf&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;graf&quot;</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>By convention, selection methods that return the current selection use <em>four</em> spaces of indent, while methods that return a new selection use only <em>two</em>. This helps reveal changes of context by making them stick out of the chain:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="mf">960</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="mf">500</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(20,20)&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="mf">920</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="mf">460</span><span class="p">);</span>
</pre></div>
</div>
<p>Selections are immutable. All selection methods that affect which elements are selected (or their order) return a new selection rather than modifying the current selection. However, note that elements are necessarily mutable, as selections drive transformations of the document!</p>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>If you use NPM, <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">d3-selection</span></code>. Otherwise, download the <a class="reference external" href="https://github.com/d3/d3-selection/releases/latest">latest release</a>. You can also load directly from <a class="reference external" href="https://d3js.org">d3js.org</a>, either as a <a class="reference external" href="https://d3js.org/d3-selection.v1.min.js">standalone library</a> or as part of <a class="reference external" href="https://github.com/d3/d3">D3</a>. AMD, CommonJS, and vanilla environments are supported. In vanilla, a <code class="docutils literal notranslate"><span class="pre">d3</span></code> global is exported:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3-selection.v1.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>

<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><a class="reference external" href="https://observablehq.com/collection/&#64;d3/d3-selection">Try d3-selection in your browser.</a></p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#selecting-elements">Selecting Elements</a></p></li>
<li><p><a class="reference external" href="#modifying-elements">Modifying Elements</a></p></li>
<li><p><a class="reference external" href="#joining-data">Joining Data</a></p></li>
<li><p><a class="reference external" href="#handling-events">Handling Events</a></p></li>
<li><p><a class="reference external" href="#control-flow">Control Flow</a></p></li>
<li><p><a class="reference external" href="#local-variables">Local Variables</a></p></li>
<li><p><a class="reference external" href="#namespaces">Namespaces</a></p></li>
</ul>
<div class="section" id="selecting-elements">
<h3>Selecting Elements<a class="headerlink" href="#selecting-elements" title="Permalink to this headline">¶</a></h3>
<p>Selection methods accept <a class="reference external" href="http://www.w3.org/TR/selectors-api/">W3C selector strings</a> such as <code class="docutils literal notranslate"><span class="pre">.fancy</span></code> to select elements with the class <em>fancy</em>, or <code class="docutils literal notranslate"><span class="pre">div</span></code> to select DIV elements. Selection methods come in two forms: select and selectAll: the former selects only the first matching element, while the latter selects all matching elements in document order. The top-level selection methods, <a class="reference external" href="#select">d3.select</a> and <a class="reference external" href="#selectAll">d3.selectAll</a>, query the entire document; the subselection methods, <a class="reference external" href="#selection_select"><em>selection</em>.select</a> and <a class="reference external" href="#selection_selectAll"><em>selection</em>.selectAll</a>, restrict selection to descendants of the selected elements.</p>
<p><a name="selection" href="#selection">#</a> d3.<b>selection</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/index.js#L38">&lt;&gt;</a></p>
<p><a class="reference external" href="#select">Selects</a> the root element, <code class="docutils literal notranslate"><span class="pre">document.documentElement</span></code>. This function can also be used to test for selections (<code class="docutils literal notranslate"><span class="pre">instanceof</span> <span class="pre">d3.selection</span></code>) or to extend the selection prototype. For example, to add a method to check checkboxes:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mf">1</span>
      <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">)</span>
      <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">,</span> <span class="o">!!</span><span class="nx">value</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<p>And then to use:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;input[type=checkbox]&quot;</span><span class="p">).</span><span class="nx">checked</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
<p><a name="select" href="#select">#</a> d3.<b>select</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/select.js#L3">&lt;&gt;</a></p>
<p>Selects the first element that matches the specified <em>selector</em> string. If no elements match the <em>selector</em>, returns an empty selection. If multiple elements match the <em>selector</em>, only the first matching element (in document order) will be selected. For example, to select the first anchor element:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">anchor</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>If the <em>selector</em> is not a string, instead selects the specified node; this is useful if you already have a reference to a node, such as <code class="docutils literal notranslate"><span class="pre">this</span></code> within an event listener or a global such as <code class="docutils literal notranslate"><span class="pre">document.body</span></code>. For example, to make a clicked paragraph red:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p><a name="selectAll" href="#selectAll">#</a> d3.<b>selectAll</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selectAll.js#L3">&lt;&gt;</a></p>
<p>Selects all elements that match the specified <em>selector</em> string. The elements will be selected in document order (top-to-bottom). If no elements in the document match the <em>selector</em>, or if the <em>selector</em> is null or undefined, returns an empty selection. For example, to select all paragraphs:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">paragraph</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>If the <em>selector</em> is not a string, instead selects the specified array of nodes; this is useful if you already have a reference to nodes, such as <code class="docutils literal notranslate"><span class="pre">this.childNodes</span></code> within an event listener or a global such as <code class="docutils literal notranslate"><span class="pre">document.links</span></code>. The nodes may instead be a pseudo-array such as a <code class="docutils literal notranslate"><span class="pre">NodeList</span></code> or <code class="docutils literal notranslate"><span class="pre">arguments</span></code>. For example, to color all links red:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">links</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><a name="selection_select" href="#selection_select">#</a> <i>selection</i>.<b>select</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/select.js">&lt;&gt;</a></p>
<p>For each selected element, selects the first descendant element that matches the specified <em>selector</em> string. If no element matches the specified selector for the current element, the element at the current index will be null in the returned selection. (If the <em>selector</em> is null, every element in the returned selection will be null, resulting in an empty selection.) If the current element has associated data, this data is propagated to the corresponding selected element. If multiple elements match the selector, only the first matching element in document order is selected. For example, to select the first bold element in every paragraph:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>If the <em>selector</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). It must return an element, or null if there is no matching element. For example, to select the previous sibling of each paragraph:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">previous</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">previousElementSibling</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Unlike <a class="reference external" href="#selection_selectAll"><em>selection</em>.selectAll</a>, <em>selection</em>.select does not affect grouping: it preserves the existing group structure and indexes, and propagates data (if any) to selected children. Grouping plays an important role in the <a class="reference external" href="#joining-data">data join</a>. See <a class="reference external" href="http://bost.ocks.org/mike/nest/">Nested Selections</a> and <a class="reference external" href="http://bost.ocks.org/mike/selection/">How Selections Work</a> for more on this topic.</p>
<p><a name="selection_selectAll" href="#selection_selectAll">#</a> <i>selection</i>.<b>selectAll</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/selectAll.js">&lt;&gt;</a></p>
<p>For each selected element, selects the descendant elements that match the specified <em>selector</em> string. The elements in the returned selection are grouped by their corresponding parent node in this selection. If no element matches the specified selector for the current element, or if the <em>selector</em> is null, the group at the current index will be empty. The selected elements do not inherit data from this selection; use <a class="reference external" href="#selection_data"><em>selection</em>.data</a> to propagate data to children. For example, to select the bold elements in every paragraph:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>If the <em>selector</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). It must return an array of elements (or a pseudo-array, such as a NodeList), or the empty array if there are no matching elements. For example, to select the previous and next siblings of each paragraph:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">previousElementSibling</span><span class="p">,</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">nextElementSibling</span>
  <span class="p">];</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Unlike <a class="reference external" href="#selection_select"><em>selection</em>.select</a>, <em>selection</em>.selectAll does affect grouping: each selected descendant is grouped by the parent element in the originating selection. Grouping plays an important role in the <a class="reference external" href="#joining-data">data join</a>. See <a class="reference external" href="http://bost.ocks.org/mike/nest/">Nested Selections</a> and <a class="reference external" href="http://bost.ocks.org/mike/selection/">How Selections Work</a> for more on this topic.</p>
<p><a name="selection_filter" href="#selection_filter">#</a> <i>selection</i>.<b>filter</b>(<i>filter</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/filter.js">&lt;&gt;</a></p>
<p>Filters the selection, returning a new selection that contains only the elements for which the specified <em>filter</em> is true. The <em>filter</em> may be specified either as a selector string or a function. If the <em>filter</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]).</p>
<p>For example, to filter a selection of table rows to contain only even rows:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">even</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;:nth-child(even)&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This is approximately equivalent to using <a class="reference external" href="#selectAll">d3.selectAll</a> directly, although the indexes may be different:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">even</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;tr:nth-child(even)&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Similarly, using a function:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">even</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">).</span><span class="nx">filter</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">i</span> <span class="o">&amp;</span> <span class="mf">1</span><span class="p">);</span>
</pre></div>
</div>
<p>Or using <a class="reference external" href="#selection_select"><em>selection</em>.select</a> (and avoiding an arrow function, since <em>this</em> is needed to refer to the current element):</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">even</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">&amp;</span> <span class="mf">1</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">:nth-child</span></code> pseudo-class is a one-based index rather than a zero-based index. Also, the above filter functions do not have precisely the same meaning as <code class="docutils literal notranslate"><span class="pre">:nth-child</span></code>; they rely on the selection index rather than the number of preceding sibling elements in the DOM.</p>
<p>The returned filtered selection preserves the parents of this selection, but like <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><em>array</em>.filter</a>, it does not preserve indexes as some elements may be removed; use <a class="reference external" href="#selection_select"><em>selection</em>.select</a> to preserve the index, if needed.</p>
<p><a name="selection_merge" href="#selection_merge">#</a> <i>selection</i>.<b>merge</b>(<i>other</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/merge.js">&lt;&gt;</a></p>
<p>Returns a new selection merging this selection with the specified <em>other</em> selection. The returned selection has the same number of groups and the same parents as this selection. Any missing (null) elements in this selection are filled with the corresponding element, if present (not null), from the specified <em>selection</em>. (If the <em>other</em> selection has additional groups or parents, they are ignored.)</p>
<p>This method is used internally by <a class="reference external" href="#selection_join"><em>selection</em>.join</a> to merge the <a class="reference external" href="#selection_enter">enter</a> and <a class="reference external" href="#selection_data">update</a> selections after <a class="reference external" href="#joining-data">binding data</a>. You can also merge explicitly, although note that since merging is based on element index, you should use operations that preserve index, such as <a class="reference external" href="#selection_select"><em>selection</em>.select</a> instead of <a class="reference external" href="#selection_filter"><em>selection</em>.filter</a>. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">odd</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">&amp;</span> <span class="mf">1</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span> <span class="p">));</span>
<span class="kd">const</span> <span class="nx">even</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">&amp;</span> <span class="mf">1</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span> <span class="p">));</span>
<span class="kd">const</span> <span class="nx">merged</span> <span class="o">=</span> <span class="nx">odd</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">even</span><span class="p">);</span>
</pre></div>
</div>
<p>See <a class="reference external" href="#selection_data"><em>selection</em>.data</a> for more.</p>
<p>This method is not intended for concatenating arbitrary selections, however: if both this selection and the specified <em>other</em> selection have (non-null) elements at the same index, this selection’s element is returned in the merge and the <em>other</em> selection’s element is ignored.</p>
<p><a name="matcher" href="#matcher">#</a> d3.<b>matcher</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/matcher.js">&lt;&gt;</a></p>
<p>Given the specified <em>selector</em>, returns a function which returns true if <code class="docutils literal notranslate"><span class="pre">this</span></code> element <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/matches">matches</a> the specified selector. This method is used internally by <a class="reference external" href="#selection_filter"><em>selection</em>.filter</a>. For example, this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">matcher</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>(Although D3 is not a compatibility layer, this implementation does support vendor-prefixed implementations due to the recent standardization of <em>element</em>.matches.)</p>
<p><a name="selector" href="#selector">#</a> d3.<b>selector</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selector.js">&lt;&gt;</a></p>
<p>Given the specified <em>selector</em>, returns a function which returns the first descendant of <code class="docutils literal notranslate"><span class="pre">this</span></code> element that matches the specified selector. This method is used internally by <a class="reference external" href="#selection_select"><em>selection</em>.select</a>. For example, this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">selector</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p><a name="selectorAll" href="#selectorAll">#</a> d3.<b>selectorAll</b>(<i>selector</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selectAll.js">&lt;&gt;</a></p>
<p>Given the specified <em>selector</em>, returns a function which returns all descendants of <code class="docutils literal notranslate"><span class="pre">this</span></code> element that match the specified selector. This method is used internally by <a class="reference external" href="#selection_selectAll"><em>selection</em>.selectAll</a>. For example, this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectorAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p><a name="window" href="#window">#</a> d3.<b>window</b>(<i>node</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/window.js">&lt;&gt;</a></p>
<p>Returns the owner window for the specified <em>node</em>. If <em>node</em> is a node, returns the owner document’s default view; if <em>node</em> is a document, returns its default view; otherwise returns the <em>node</em>.</p>
<p><a name="style" href="#style">#</a> d3.<b>style</b>(<i>node</i>, <i>name</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/style.js#L32">&lt;&gt;</a></p>
<p>Returns the value of the style property with the specified <em>name</em> for the specified <em>node</em>. If the <em>node</em> has an inline style with the specified <em>name</em>, its value is returned; otherwise, the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value">computed property value</a> is returned. See also <a class="reference external" href="#selection_style"><em>selection</em>.style</a>.</p>
</div>
<div class="section" id="modifying-elements">
<h3>Modifying Elements<a class="headerlink" href="#modifying-elements" title="Permalink to this headline">¶</a></h3>
<p>After selecting elements, use the selection’s transformation methods to affect document content. For example, to set the name attribute and color style of an anchor element:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;fred&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>To experiment with selections, visit <a class="reference external" href="https://d3js.org">d3js.org</a> and open your browser’s developer console! (In Chrome, open the console with ⌥⌘J.) Select elements and then inspect the returned selection to see which elements are selected and how they are grouped. Call selection methods and see how the page content changes.</p>
<p><a name="selection_attr" href="#selection_attr">#</a> <i>selection</i>.<b>attr</b>(<i>name</i>[, <i>value</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/attr.js">&lt;&gt;</a></p>
<p>If a <em>value</em> is specified, sets the attribute with the specified <em>name</em> to the specified value on the selected elements and returns this selection. If the <em>value</em> is a constant, all elements are given the same attribute value; otherwise, if the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function’s return value is then used to set each element’s attribute. A null value will remove the specified attribute.</p>
<p>If a <em>value</em> is not specified, returns the current value of the specified attribute for the first (non-null) element in the selection. This is generally useful only if you know that the selection contains exactly one element.</p>
<p>The specified <em>name</em> may have a namespace prefix, such as <code class="docutils literal notranslate"><span class="pre">xlink:href</span></code> to specify the <code class="docutils literal notranslate"><span class="pre">href</span></code> attribute in the XLink namespace. See <a class="reference external" href="#namespaces">namespaces</a> for the map of supported namespaces; additional namespaces can be registered by adding to the map.</p>
<p><a name="selection_classed" href="#selection_classed">#</a> <i>selection</i>.<b>classed</b>(<i>names</i>[, <i>value</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/classed.js">&lt;&gt;</a></p>
<p>If a <em>value</em> is specified, assigns or unassigns the specified CSS class <em>names</em> on the selected elements by setting the <code class="docutils literal notranslate"><span class="pre">class</span></code> attribute or modifying the <code class="docutils literal notranslate"><span class="pre">classList</span></code> property and returns this selection. The specified <em>names</em> is a string of space-separated class names. For example, to assign the classes <code class="docutils literal notranslate"><span class="pre">foo</span></code> and <code class="docutils literal notranslate"><span class="pre">bar</span></code> to the selected elements:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">classed</span><span class="p">(</span><span class="s2">&quot;foo bar&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
<p>If the <em>value</em> is truthy, then all elements are assigned the specified classes; otherwise, the classes are unassigned. If the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function’s return value is then used to assign or unassign classes on each element. For example, to randomly associate the class <em>foo</em> with on average half the selected elements:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">classed</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">);</span>
</pre></div>
</div>
<p>If a <em>value</em> is not specified, returns true if and only if the first (non-null) selected element has the specified <em>classes</em>. This is generally useful only if you know the selection contains exactly one element.</p>
<p><a name="selection_style" href="#selection_style">#</a> <i>selection</i>.<b>style</b>(<i>name</i>[, <i>value</i>[, <i>priority</i>]]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/style.js">&lt;&gt;</a></p>
<p>If a <em>value</em> is specified, sets the style property with the specified <em>name</em> to the specified value on the selected elements and returns this selection. If the <em>value</em> is a constant, then all elements are given the same style property value; otherwise, if the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function’s return value is then used to set each element’s style property. A null value will remove the style property. An optional <em>priority</em> may also be specified, either as null or the string <code class="docutils literal notranslate"><span class="pre">important</span></code> (without the exclamation point).</p>
<p>If a <em>value</em> is not specified, returns the current value of the specified style property for the first (non-null) element in the selection. The current value is defined as the element’s inline value, if present, and otherwise its <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value">computed value</a>. Accessing the current style value is generally useful only if you know the selection contains exactly one element.</p>
<p>Caution: unlike many SVG attributes, CSS styles typically have associated units. For example, <code class="docutils literal notranslate"><span class="pre">3px</span></code> is a valid stroke-width property value, while <code class="docutils literal notranslate"><span class="pre">3</span></code> is not. Some browsers implicitly assign the <code class="docutils literal notranslate"><span class="pre">px</span></code> (pixel) unit to numeric values, but not all browsers do: IE, for example, throws an “invalid arguments” error!</p>
<p><a name="selection_property" href="#selection_property">#</a> <i>selection</i>.<b>property</b>(<i>name</i>[, <i>value</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/property.js">&lt;&gt;</a></p>
<p>Some HTML elements have special properties that are not addressable using attributes or styles, such as a form field’s text <code class="docutils literal notranslate"><span class="pre">value</span></code> and a checkbox’s <code class="docutils literal notranslate"><span class="pre">checked</span></code> boolean. Use this method to get or set these properties.</p>
<p>If a <em>value</em> is specified, sets the property with the specified <em>name</em> to the specified value on selected elements. If the <em>value</em> is a constant, then all elements are given the same property value; otherwise, if the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function’s return value is then used to set each element’s property. A null value will delete the specified property.</p>
<p>If a <em>value</em> is not specified, returns the value of the specified property for the first (non-null) element in the selection. This is generally useful only if you know the selection contains exactly one element.</p>
<p><a name="selection_text" href="#selection_text">#</a> <i>selection</i>.<b>text</b>([<i>value</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/text.js">&lt;&gt;</a></p>
<p>If a <em>value</em> is specified, sets the <a class="reference external" href="http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-textContent">text content</a> to the specified value on all selected elements, replacing any existing child elements. If the <em>value</em> is a constant, then all elements are given the same text content; otherwise, if the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function’s return value is then used to set each element’s text content. A null value will clear the content.</p>
<p>If a <em>value</em> is not specified, returns the text content for the first (non-null) element in the selection. This is generally useful only if you know the selection contains exactly one element.</p>
<p><a name="selection_html" href="#selection_html">#</a> <i>selection</i>.<b>html</b>([<i>value</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/html.js">&lt;&gt;</a></p>
<p>If a <em>value</em> is specified, sets the <a class="reference external" href="http://dev.w3.org/html5/spec-LC/apis-in-html-documents.html#innerhtml">inner HTML</a> to the specified value on all selected elements, replacing any existing child elements. If the <em>value</em> is a constant, then all elements are given the same inner HTML; otherwise, if the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function’s return value is then used to set each element’s inner HTML. A null value will clear the content.</p>
<p>If a <em>value</em> is not specified, returns the inner HTML for the first (non-null) element in the selection. This is generally useful only if you know the selection contains exactly one element.</p>
<p>Use <a class="reference external" href="#selection_append"><em>selection</em>.append</a> or <a class="reference external" href="#selection_insert"><em>selection</em>.insert</a> instead to create data-driven content; this method is intended for when you want a little bit of HTML, say for rich formatting. Also, <em>selection</em>.html is only supported on HTML elements. SVG elements and other non-HTML elements do not support the innerHTML property, and thus are incompatible with <em>selection</em>.html. Consider using <a class="reference external" href="https://developer.mozilla.org/en-US/docs/XMLSerializer">XMLSerializer</a> to convert a DOM subtree to text. See also the <a class="reference external" href="https://code.google.com/p/innersvg/">innersvg polyfill</a>, which provides a shim to support the innerHTML property on SVG elements.</p>
<p><a name="selection_append" href="#selection_append">#</a> <i>selection</i>.<b>append</b>(<i>type</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/append.js">&lt;&gt;</a></p>
<p>If the specified <em>type</em> is a string, appends a new element of this type (tag name) as the last child of each selected element, or before the next following sibling in the update selection if this is an <a class="reference external" href="#selection_enter">enter selection</a>. The latter behavior for enter selections allows you to insert elements into the DOM in an order consistent with the new bound data; however, note that <a class="reference external" href="#selection_order"><em>selection</em>.order</a> may still be required if updating elements change order (<em>i.e.</em>, if the order of new data is inconsistent with old data).</p>
<p>If the specified <em>type</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). This function should return an element to be appended. (The function typically creates a new element, but it may instead return an existing element.) For example, to append a paragraph to each DIV element:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>Which is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>In both cases, this method returns a new selection containing the appended elements. Each new element inherits the data of the current elements, if any, in the same manner as <a class="reference external" href="#selection_select"><em>selection</em>.select</a>.</p>
<p>The specified <em>name</em> may have a namespace prefix, such as <code class="docutils literal notranslate"><span class="pre">svg:text</span></code> to specify a <code class="docutils literal notranslate"><span class="pre">text</span></code> attribute in the SVG namespace. See <a class="reference external" href="#namespaces">namespaces</a> for the map of supported namespaces; additional namespaces can be registered by adding to the map. If no namespace is specified, the namespace will be inherited from the parent element; or, if the name is one of the known prefixes, the corresponding namespace will be used (for example, <code class="docutils literal notranslate"><span class="pre">svg</span></code> implies <code class="docutils literal notranslate"><span class="pre">svg:svg</span></code>).</p>
<p><a name="selection_insert" href="#selection_insert">#</a> <i>selection</i>.<b>insert</b>(<i>type</i>[, <i>before</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/insert.js">&lt;&gt;</a></p>
<p>If the specified <em>type</em> is a string, inserts a new element of this type (tag name) before the first element matching the specified <em>before</em> selector for each selected element. For example, a <em>before</em> selector <code class="docutils literal notranslate"><span class="pre">:first-child</span></code> will prepend nodes before the first child. If <em>before</em> is not specified, it defaults to null. (To append elements in an order consistent with <a class="reference external" href="#joining-data">bound data</a>, use <a class="reference external" href="#selection_append"><em>selection</em>.append</a>.)</p>
<p>Both <em>type</em> and <em>before</em> may instead be specified as functions which are evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The <em>type</em> function should return an element to be inserted; the <em>before</em> function should return the child element before which the element should be inserted. For example, to append a paragraph to each DIV element:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">insert</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">insert</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>Which is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">),</span> <span class="kc">null</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>In both cases, this method returns a new selection containing the appended elements. Each new element inherits the data of the current elements, if any, in the same manner as <a class="reference external" href="#selection_select"><em>selection</em>.select</a>.</p>
<p>The specified <em>name</em> may have a namespace prefix, such as <code class="docutils literal notranslate"><span class="pre">svg:text</span></code> to specify a <code class="docutils literal notranslate"><span class="pre">text</span></code> attribute in the SVG namespace. See <a class="reference external" href="#namespaces">namespaces</a> for the map of supported namespaces; additional namespaces can be registered by adding to the map. If no namespace is specified, the namespace will be inherited from the parent element; or, if the name is one of the known prefixes, the corresponding namespace will be used (for example, <code class="docutils literal notranslate"><span class="pre">svg</span></code> implies <code class="docutils literal notranslate"><span class="pre">svg:svg</span></code>).</p>
<p><a name="selection_remove" href="#selection_remove">#</a> <i>selection</i>.<b>remove</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/remove.js">&lt;&gt;</a></p>
<p>Removes the selected elements from the document. Returns this selection (the removed elements) which are now detached from the DOM. There is not currently a dedicated API to add removed elements back to the document; however, you can pass a function to <a class="reference external" href="#selection_append"><em>selection</em>.append</a> or <a class="reference external" href="#selection_insert"><em>selection</em>.insert</a> to re-add elements.</p>
<p><a name="selection_clone" href="#selection_clone">#</a> <i>selection</i>.<b>clone</b>([<i>deep</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/clone.js">&lt;&gt;</a></p>
<p>Inserts clones of the selected elements immediately following the selected elements and returns a selection of the newly added clones. If <em>deep</em> is truthy, the descendant nodes of the selected elements will be cloned as well. Otherwise, only the elements themselves will be cloned. Equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="nx">deep</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p><a name="selection_sort" href="#selection_sort">#</a> <i>selection</i>.<b>sort</b>(<i>compare</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/sort.js">&lt;&gt;</a></p>
<p>Returns a new selection that contains a copy of each group in this selection sorted according to the <em>compare</em> function. After sorting, re-inserts elements to match the resulting order (per <a class="reference external" href="#selection_order"><em>selection</em>.order</a>).</p>
<p>The compare function, which defaults to <a class="reference external" href="https://github.com/d3/d3-array#ascending">ascending</a>, is passed two elements’ data <em>a</em> and <em>b</em> to compare. It should return either a negative, positive, or zero value. If negative, then <em>a</em> should be before <em>b</em>; if positive, then <em>a</em> should be after <em>b</em>; otherwise, <em>a</em> and <em>b</em> are considered equal and the order is arbitrary.</p>
<p>Note that sorting is not guaranteed to be stable; however, it is guaranteed to have the same behavior as your browser’s built-in <a class="reference external" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort">sort</a> method on arrays.</p>
<p><a name="selection_order" href="#selection_order">#</a> <i>selection</i>.<b>order</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/order.js">&lt;&gt;</a></p>
<p>Re-inserts elements into the document such that the document order of each group matches the selection order. This is equivalent to calling <a class="reference external" href="#selection_sort"><em>selection</em>.sort</a> if the data is already sorted, but much faster.</p>
<p><a name="selection_raise" href="#selection_raise">#</a> <i>selection</i>.<b>raise</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/raise.js">&lt;&gt;</a></p>
<p>Re-inserts each selected element, in order, as the last child of its parent. Equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p><a name="selection_lower" href="#selection_lower">#</a> <i>selection</i>.<b>lower</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/lower.js">&lt;&gt;</a></p>
<p>Re-inserts each selected element, in order, as the first child of its parent. Equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p><a name="create" href="#create">#</a> d3.<b>create</b>(<i>name</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/create.js">&lt;&gt;</a></p>
<p>Given the specified element <em>name</em>, returns a single-element selection containing a detached element of the given name in the current document. This method assumes the HTML namespace, so you must specify a namespace explicitly when creating SVG or other non-HTML elements; see <a class="reference external" href="#namespace">namespace</a> for details on supported namespace prefixes.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span> <span class="c1">// equivalent to svg:svg</span>
<span class="nx">d3</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;svg:svg&quot;</span><span class="p">)</span> <span class="c1">// more explicitly</span>
<span class="nx">d3</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;svg:g&quot;</span><span class="p">)</span> <span class="c1">// an SVG G element</span>
<span class="nx">d3</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span> <span class="c1">// an HTML G (unknown) element</span>
</pre></div>
</div>
<p><a name="creator" href="#creator">#</a> d3.<b>creator</b>(<i>name</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/creator.js">&lt;&gt;</a></p>
<p>Given the specified element <em>name</em>, returns a function which creates an element of the given name, assuming that <code class="docutils literal notranslate"><span class="pre">this</span></code> is the parent element. This method is used internally by <a class="reference external" href="#selection_append"><em>selection</em>.append</a> and <a class="reference external" href="#selection_insert"><em>selection</em>.insert</a> to create new elements. For example, this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">creator</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>See <a class="reference external" href="#namespace">namespace</a> for details on supported namespace prefixes, such as for SVG elements.</p>
</div>
<div class="section" id="joining-data">
<h3>Joining Data<a class="headerlink" href="#joining-data" title="Permalink to this headline">¶</a></h3>
<p>For an introduction to D3’s data joins, see the <a class="reference external" href="https://observablehq.com/&#64;d3/selection-join"><em>selection</em>.join notebook</a>. Also see <a class="reference external" href="http://bost.ocks.org/mike/join/">Thinking With Joins</a>.</p>
<p><a name="selection_data" href="#selection_data">#</a> <i>selection</i>.<b>data</b>([<i>data</i>[, <i>key</i>]]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/data.js">&lt;&gt;</a></p>
<p>Binds the specified array of <em>data</em> with the selected elements, returning a new selection that represents the <em>update</em> selection: the elements successfully bound to data. Also defines the <a class="reference external" href="#selection_enter">enter</a> and <a class="reference external" href="#selection_exit">exit</a> selections on the returned selection, which can be used to add or remove elements to correspond to the new data. The specified <em>data</em> is an array of arbitrary values (<em>e.g.</em>, numbers or objects), or a function that returns an array of values for each group. When data is assigned to an element, it is stored in the property <code class="docutils literal notranslate"><span class="pre">__data__</span></code>, thus making the data “sticky” and available on re-selection.</p>
<p>The <em>data</em> is specified <strong>for each group</strong> in the selection. If the selection has multiple groups (such as <a class="reference external" href="#selectAll">d3.selectAll</a> followed by <a class="reference external" href="#selection_selectAll"><em>selection</em>.selectAll</a>), then <em>data</em> should typically be specified as a function. This function will be evaluated for each group in order, being passed the group’s parent datum (<em>d</em>, which may be undefined), the group index (<em>i</em>), and the selection’s parent nodes (<em>nodes</em>), with <em>this</em> as the group’s parent element.</p>
<p>In conjunction with <a class="reference external" href="#selection_join"><em>selection</em>.join</a> (or more explicitly with <a class="reference external" href="#selection_enter"><em>selection</em>.enter</a>, <a class="reference external" href="#selection_exit"><em>selection</em>.exit</a>, <a class="reference external" href="#selection_append"><em>selection</em>.append</a> and <a class="reference external" href="#selection_remove"><em>selection</em>.remove</a>), <em>selection</em>.data can be used to enter, update and exit elements to match data. For example, to create an HTML table from a matrix of numbers:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">matrix</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="mf">11975</span><span class="p">,</span>  <span class="mf">5871</span><span class="p">,</span> <span class="mf">8916</span><span class="p">,</span> <span class="mf">2868</span><span class="p">],</span>
  <span class="p">[</span> <span class="mf">1951</span><span class="p">,</span> <span class="mf">10048</span><span class="p">,</span> <span class="mf">2060</span><span class="p">,</span> <span class="mf">6171</span><span class="p">],</span>
  <span class="p">[</span> <span class="mf">8010</span><span class="p">,</span> <span class="mf">16145</span><span class="p">,</span> <span class="mf">8090</span><span class="p">,</span> <span class="mf">8045</span><span class="p">],</span>
  <span class="p">[</span> <span class="mf">1013</span><span class="p">,</span>   <span class="mf">990</span><span class="p">,</span>  <span class="mf">940</span><span class="p">,</span> <span class="mf">6907</span><span class="p">]</span>
<span class="p">];</span>

<span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">matrix</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">);</span>
</pre></div>
</div>
<p>In this example the <em>data</em> function is the identity function: for each table row, it returns the corresponding row from the data matrix.</p>
<p>If a <em>key</em> function is not specified, then the first datum in <em>data</em> is assigned to the first selected element, the second datum to the second selected element, and so on. A <em>key</em> function may be specified to control which datum is assigned to which element, replacing the default join-by-index, by computing a string identifier for each datum and element. This key function is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]); the returned string is the element’s key. The key function is then also evaluated for each new datum in <em>data</em>, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the group’s new <em>data</em>, with <em>this</em> as the group’s parent DOM element; the returned string is the datum’s key. The datum for a given key is assigned to the element with the matching key. If multiple elements have the same key, the duplicate elements are put into the exit selection; if multiple data have the same key, the duplicate data are put into the enter selection.</p>
<p>For example, given this document:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Ford&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Jarrah&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Kwon&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Locke&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Reyes&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;Shephard&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>You could join data by key as follows:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Locke&quot;</span><span class="p">,</span> <span class="nx">number</span><span class="o">:</span> <span class="mf">4</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Reyes&quot;</span><span class="p">,</span> <span class="nx">number</span><span class="o">:</span> <span class="mf">8</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Ford&quot;</span><span class="p">,</span> <span class="nx">number</span><span class="o">:</span> <span class="mf">15</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Jarrah&quot;</span><span class="p">,</span> <span class="nx">number</span><span class="o">:</span> <span class="mf">16</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Shephard&quot;</span><span class="p">,</span> <span class="nx">number</span><span class="o">:</span> <span class="mf">23</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Kwon&quot;</span><span class="p">,</span> <span class="nx">number</span><span class="o">:</span> <span class="mf">42</span><span class="p">}</span>
<span class="p">];</span>

<span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">number</span><span class="p">);</span>
</pre></div>
</div>
<p>This example key function uses the datum <em>d</em> if present, and otherwise falls back to the element’s id property. Since these elements were not previously bound to data, the datum <em>d</em> is null when the key function is evaluated on selected elements, and non-null when the key function is evaluated on the new data.</p>
<p>The <em>update</em> and <em>enter</em> selections are returned in data order, while the <em>exit</em> selection preserves the selection order prior to the join. If a key function is specified, the order of elements in the selection may not match their order in the document; use <a class="reference external" href="#selection_order"><em>selection</em>.order</a> or <a class="reference external" href="#selection_sort"><em>selection</em>.sort</a> as needed. For more on how the key function affects the join, see <a class="reference external" href="http://bost.ocks.org/mike/bar/2/">A Bar Chart, Part 2</a> and <a class="reference external" href="http://bost.ocks.org/mike/constancy/">Object Constancy</a>.</p>
<p>If <em>data</em> is not specified, this method returns the array of data for the selected elements.</p>
<p>This method cannot be used to clear bound data; use <a class="reference external" href="#selection_datum"><em>selection</em>.datum</a> instead.</p>
<p><a name="selection_join" href="#selection_join">#</a> <i>selection</i>.<b>join</b>(<i>enter</i>[, <i>update</i>][, <i>exit</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/join.js">&lt;&gt;</a></p>
<p>Appends, removes and reorders elements as necessary to match the data that was previously bound by <a class="reference external" href="#selection_data"><em>selection</em>.data</a>, returning the <a class="reference external" href="#selection_merge">merged</a> enter and update selection. This method is a convenient alternative to the explicit <a class="reference external" href="https://bl.ocks.org/mbostock/3808218">general update pattern</a>, replacing <a class="reference external" href="#selection_enter"><em>selection</em>.enter</a>, <a class="reference external" href="#selection_exit"><em>selection</em>.exit</a>, <a class="reference external" href="#selection_append"><em>selection</em>.append</a>, <a class="reference external" href="#selection_remove"><em>selection</em>.remove</a>, and <a class="reference external" href="#selection_order"><em>selection</em>.order</a>. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The <em>enter</em> function may be specified as a string shorthand, as above, which is equivalent to <a class="reference external" href="#selection_append"><em>selection</em>.append</a> with the given element name. Likewise, optional <em>update</em> and <em>exit</em> functions may be specified, which default to the identity function and calling <a class="reference external" href="#selection_remove"><em>selection</em>.remove</a>, respectively. The shorthand above is thus equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">join</span><span class="p">(</span>
    <span class="nx">enter</span> <span class="p">=&gt;</span> <span class="nx">enter</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">),</span>
    <span class="nx">update</span> <span class="p">=&gt;</span> <span class="nx">update</span><span class="p">,</span>
    <span class="nx">exit</span> <span class="p">=&gt;</span> <span class="nx">exit</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
  <span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>By passing separate functions on enter, update and exit, you have greater control over what happens. And by specifying a key function to <a class="reference external" href="#selection_data"><em>selection</em>.data</a>, you can minimize changes to the DOM to optimize performance. For example, to set different fill colors for enter and update:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">join</span><span class="p">(</span>
    <span class="nx">enter</span> <span class="p">=&gt;</span> <span class="nx">enter</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">),</span>
    <span class="nx">update</span> <span class="p">=&gt;</span> <span class="nx">update</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">)</span>
  <span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The selections returned by the <em>enter</em> and <em>update</em> functions are merged and then returned by <em>selection</em>.join.</p>
<p>You also animate enter, update and exit by creating transitions inside the <em>enter</em>, <em>update</em> and <em>exit</em> functions. To avoid breaking the method chain, use <em>selection</em>.call to create transitions, or return an undefined enter or update selection to prevent merging: the return value of the <em>enter</em> and <em>update</em> functions specifies the two selections to merge and return by <em>selection</em>.join.</p>
<p>For more, see the <a class="reference external" href="https://observablehq.com/&#64;d3/selection-join"><em>selection</em>.join notebook</a>.</p>
<p><a name="selection_enter" href="#selection_enter">#</a> <i>selection</i>.<b>enter</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/enter.js">&lt;&gt;</a></p>
<p>Returns the enter selection: placeholder nodes for each datum that had no corresponding DOM element in the selection. (The enter selection is empty for selections not returned by <a class="reference external" href="#selection_data"><em>selection</em>.data</a>.)</p>
<p>The enter selection is typically used to create “missing” elements corresponding to new data. For example, to create DIV elements from an array of numbers:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">([</span><span class="mf">4</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">16</span><span class="p">,</span> <span class="mf">23</span><span class="p">,</span> <span class="mf">42</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">);</span>
</pre></div>
</div>
<p>If the body is initially empty, the above code will create six new DIV elements, append them to the body in-order, and assign their text content as the associated (string-coerced) number:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>15<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>16<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>23<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>42<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Conceptually, the enter selection’s placeholders are pointers to the parent element (in this example, the document body). The enter selection is typically only used transiently to append elements, and is often <a class="reference external" href="#selection_merge">merged</a> with the update selection after appending, such that modifications can be applied to both entering and updating elements.</p>
<p><a name="selection_exit" href="#selection_exit">#</a> <i>selection</i>.<b>exit</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/exit.js">&lt;&gt;</a></p>
<p>Returns the exit selection: existing DOM elements in the selection for which no new datum was found. (The exit selection is empty for selections not returned by <a class="reference external" href="#selection_data"><em>selection</em>.data</a>.)</p>
<p>The exit selection is typically used to remove “superfluous” elements corresponding to old data. For example, to update the DIV elements created previously with a new array of numbers:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">div</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">data</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">16</span><span class="p">,</span> <span class="mf">32</span><span class="p">],</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">);</span>
</pre></div>
</div>
<p>Since a key function was specified (as the identity function), and the new data contains the numbers [4, 8, 16] which match existing elements in the document, the update selection contains three DIV elements. Leaving those elements as-is, we can append new elements for [1, 2, 32] using the enter selection:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">div</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">);</span>
</pre></div>
</div>
<p>Likewise, to remove the exiting elements [15, 23, 42]:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">div</span><span class="p">.</span><span class="nx">exit</span><span class="p">().</span><span class="nx">remove</span><span class="p">();</span>
</pre></div>
</div>
<p>Now the document body looks like this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>4<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>8<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>16<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>32<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The order of the DOM elements matches the order of the data because the old data’s order and the new data’s order were consistent. If the new data’s order is different, use <a class="reference external" href="#selection_order"><em>selection</em>.order</a> to reorder the elements in the DOM. See the <a class="reference external" href="http://bl.ocks.org/mbostock/3808218">General Update Pattern</a> example thread for more on data joins.</p>
<p><a name="selection_datum" href="#selection_datum">#</a> <i>selection</i>.<b>datum</b>([<i>value</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/datum.js">&lt;&gt;</a></p>
<p>Gets or sets the bound data for each selected element. Unlike <a class="reference external" href="#selection_data"><em>selection</em>.data</a>, this method does not compute a join and does not affect indexes or the enter and exit selections.</p>
<p>If a <em>value</em> is specified, sets the element’s bound data to the specified value on all selected elements. If the <em>value</em> is a constant, all elements are given the same datum; otherwise, if the <em>value</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). The function is then used to set each element’s new data. A null value will delete the bound data.</p>
<p>If a <em>value</em> is not specified, returns the bound datum for the first (non-null) element in the selection. This is generally useful only if you know the selection contains exactly one element.</p>
<p>This method is useful for accessing HTML5 <a class="reference external" href="http://www.w3.org/TR/html5/dom.html#custom-data-attribute">custom data attributes</a>. For example, given the following elements:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;list&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">data-username</span><span class="o">=</span><span class="s">&quot;shawnbot&quot;</span><span class="p">&gt;</span>Shawn Allen<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">data-username</span><span class="o">=</span><span class="s">&quot;mbostock&quot;</span><span class="p">&gt;</span>Mike Bostock<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>You can expose the custom data attributes by setting each element’s data as the built-in <a class="reference external" href="http://www.w3.org/TR/html5/dom.html#dom-dataset">dataset</a> property:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">datum</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">dataset</span><span class="p">;</span> <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-events">
<h3>Handling Events<a class="headerlink" href="#handling-events" title="Permalink to this headline">¶</a></h3>
<p>For interaction, selections allow listening for and dispatching of events.</p>
<p><a name="selection_on" href="#selection_on">#</a> <i>selection</i>.<b>on</b>(<i>typenames</i>[, <i>listener</i>[, <i>options</i>]]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/on.js">&lt;&gt;</a></p>
<p>Adds or removes a <em>listener</em> to each selected element for the specified event <em>typenames</em>. The <em>typenames</em> is a string event type, such as <code class="docutils literal notranslate"><span class="pre">click</span></code>, <code class="docutils literal notranslate"><span class="pre">mouseover</span></code>, or <code class="docutils literal notranslate"><span class="pre">submit</span></code>; any <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events">DOM event type</a> supported by your browser may be used. The type may be optionally followed by a period (<code class="docutils literal notranslate"><span class="pre">.</span></code>) and a name; the optional name allows multiple callbacks to be registered to receive events of the same type, such as <code class="docutils literal notranslate"><span class="pre">click.foo</span></code> and <code class="docutils literal notranslate"><span class="pre">click.bar</span></code>. To specify multiple typenames, separate typenames with spaces, such as <code class="docutils literal notranslate"><span class="pre">input</span> <span class="pre">change</span></code> or <code class="docutils literal notranslate"><span class="pre">click.foo</span> <span class="pre">click.bar</span></code>.</p>
<p>When a specified event is dispatched on a selected element, the specified <em>listener</em> will be evaluated for the element, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). Listeners always see the latest datum for their element, but the index is a property of the selection and is fixed when the listener is assigned; to update the index, re-assign the listener. To access the current event within a listener, use <a class="reference external" href="#event">d3.event</a>.</p>
<p>If an event listener was previously registered for the same <em>typename</em> on a selected element, the old listener is removed before the new listener is added. To remove a listener, pass null as the <em>listener</em>. To remove all listeners for a given name, pass null as the <em>listener</em> and <code class="docutils literal notranslate"><span class="pre">.foo</span></code> as the <em>typename</em>, where <code class="docutils literal notranslate"><span class="pre">foo</span></code> is the name; to remove all listeners with no name, specify <code class="docutils literal notranslate"><span class="pre">.</span></code> as the <em>typename</em>.</p>
<p>An optional <em>options</em> object may specify characteristics about the event listener, such as whether it is capturing or passive; see <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener"><em>element</em>.addEventListener</a>.</p>
<p>If a <em>listener</em> is not specified, returns the currently-assigned listener for the specified event <em>typename</em> on the first (non-null) selected element, if any. If multiple typenames are specified, the first matching listener is returned.</p>
<p><a name="selection_dispatch" href="#selection_dispatch">#</a> <i>selection</i>.<b>dispatch</b>(<i>type</i>[, <i>parameters</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/dispatch.js">&lt;&gt;</a></p>
<p>Dispatches a <a class="reference external" href="http://www.w3.org/TR/dom/#interface-customevent">custom event</a> of the specified <em>type</em> to each selected element, in order. An optional <em>parameters</em> map may be specified to set additional properties of the event. It may contain the following fields:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3.org/TR/dom/#dom-event-bubbles"><code class="docutils literal notranslate"><span class="pre">bubbles</span></code></a> - if true, the event is dispatched to ancestors in reverse tree order.</p></li>
<li><p><a class="reference external" href="https://www.w3.org/TR/dom/#dom-event-cancelable"><code class="docutils literal notranslate"><span class="pre">cancelable</span></code></a> - if true, <em>event</em>.preventDefault is allowed.</p></li>
<li><p><a class="reference external" href="https://www.w3.org/TR/dom/#dom-customevent-detail"><code class="docutils literal notranslate"><span class="pre">detail</span></code></a> - any custom data associated with the event.</p></li>
</ul>
<p>If <em>parameters</em> is a function, it is evaluated for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). It must return the parameters map for the current element.</p>
<p><a name="event" href="#event">#</a> d3.<b>event</b></p>
<p>The current <a class="reference external" href="https://developer.mozilla.org/en-US/docs/DOM/event">event</a>, if any. This is set during the invocation of an event listener, and is reset after the listener terminates. Use this to access standard event fields such as <a class="reference external" href="https://www.w3.org/TR/dom/#dom-event-timestamp"><em>event</em>.timeStamp</a> and methods such as <a class="reference external" href="https://www.w3.org/TR/dom/#dom-event-preventdefault"><em>event</em>.preventDefault</a>. While you can use the native <a class="reference external" href="https://developer.mozilla.org/en/DOM/event.pageX"><em>event</em>.pageX</a> and <a class="reference external" href="https://developer.mozilla.org/en/DOM/event.pageY"><em>event</em>.pageY</a>, it is often more convenient to transform the event position to the local coordinate system of the container that received the event using <a class="reference external" href="#mouse">d3.mouse</a>, <a class="reference external" href="#touch">d3.touch</a> or <a class="reference external" href="#touches">d3.touches</a>.</p>
<p>If you use Babel, Webpack, or another ES6-to-ES5 bundler, be aware that the value of d3.event changes during an event! An import of d3.event must be a <a class="reference external" href="http://www.2ality.com/2015/07/es6-module-exports.html">live binding</a>, so you may need to configure the bundler to import from D3’s ES6 modules rather than from the generated UMD bundle; not all bundlers observe <a class="reference external" href="https://github.com/rollup/rollup/wiki/jsnext:main">jsnext:main</a>. Also beware of conflicts with the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/event"><em>window</em>.event</a> global.</p>
<p><a name="customEvent" href="#customEvent">#</a> d3.<b>customEvent</b>(<i>event</i>, <i>listener</i>[, <i>that</i>[, <i>arguments</i>]]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/on.js#L98">&lt;&gt;</a></p>
<p>Invokes the specified <em>listener</em>, using the specified <em>that</em> <code class="docutils literal notranslate"><span class="pre">this</span></code> context and passing the specified <em>arguments</em>, if any. During the invocation, <a class="reference external" href="#event">d3.event</a> is set to the specified <em>event</em>; after the listener returns (or throws an error), d3.event is restored to its previous value. In addition, sets <em>event</em>.sourceEvent to the prior value of d3.event, allowing custom events to retain a reference to the originating native event. Returns the value returned by the <em>listener</em>.</p>
<p><a name="mouse" href="#mouse">#</a> d3.<b>mouse</b>(<i>container</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/mouse.js">&lt;&gt;</a></p>
<p>Returns the <em>x</em> and <em>y</em> coordinates of the <a class="reference external" href="#event">current event</a> relative to the specified <em>container</em>. The container may be an HTML or SVG container element, such as a <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#Groups">G element</a> or an <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#SVGElement">SVG element</a>. The coordinates are returned as a two-element array of numbers [<em>x</em>, <em>y</em>].</p>
<p><a name="touch" href="#touch">#</a> d3.<b>touch</b>(<i>container</i>[, <i>touches</i>], <i>identifier</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/touch.js">&lt;&gt;</a></p>
<p>Returns the <em>x</em> and <em>y</em> coordinates of the touch with the specified <em>identifier</em> associated with the <a class="reference external" href="#event">current event</a> relative to the specified <em>container</em>. The container may be an HTML or SVG container element, such as a <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#Groups">G element</a> or an <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#SVGElement">SVG element</a>. The coordinates are returned as a two-element array of numbers [<em>x</em>, <em>y</em>]. If there is no touch with the specified identifier in <em>touches</em>, returns null; this can be useful for ignoring touchmove events where the only some touches have moved. If <em>touches</em> is not specified, it defaults to the current event’s <a class="reference external" href="http://developer.apple.com/library/safari/documentation/UserExperience/Reference/TouchEventClassReference/TouchEvent/TouchEvent.html#//apple_ref/javascript/instp/TouchEvent/changedTouches">changedTouches</a> property.</p>
<p><a name="touches" href="#touches">#</a> d3.<b>touches</b>(<i>container</i>[, <i>touches</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/touches.js">&lt;&gt;</a></p>
<p>Returns the <em>x</em> and <em>y</em> coordinates of the touches associated with the <a class="reference external" href="#event">current event</a> relative to the specified <em>container</em>. The container may be an HTML or SVG container element, such as a <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#Groups">G element</a> or an <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#SVGElement">SVG element</a>. The coordinates are returned as an array of two-element arrays of numbers [[<em>x1</em>, <em>y1</em>], [<em>x2</em>, <em>y2</em>], …]. If <em>touches</em> is not specified, it defaults to the current event’s <a class="reference external" href="http://developer.apple.com/library/safari/documentation/UserExperience/Reference/TouchEventClassReference/TouchEvent/TouchEvent.html#//apple_ref/javascript/instp/TouchEvent/touches">touches</a> property.</p>
<p><a name="clientPoint" href="#clientPoint">#</a> d3.<b>clientPoint</b>(<i>container</i>, <i>event</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/point.js">&lt;&gt;</a></p>
<p>Returns the <em>x</em> and <em>y</em> coordinates of the specified <em>event</em> relative to the specified <em>container</em>. (The <em>event</em> may also be a <a class="reference external" href="https://www.w3.org/TR/touch-events/#touch-interface">touch</a>.) The container may be an HTML or SVG container element, such as a <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#Groups">G element</a> or an <a class="reference external" href="http://www.w3.org/TR/SVG/struct.html#SVGElement">SVG element</a>. The coordinates are returned as a two-element array of numbers [<em>x</em>, <em>y</em>].</p>
</div>
<div class="section" id="control-flow">
<h3>Control Flow<a class="headerlink" href="#control-flow" title="Permalink to this headline">¶</a></h3>
<p>For advanced usage, selections provide methods for custom control flow.</p>
<p><a name="selection_each" href="#selection_each">#</a> <i>selection</i>.<b>each</b>(<i>function</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/each.js">&lt;&gt;</a></p>
<p>Invokes the specified <em>function</em> for each selected element, in order, being passed the current datum (<em>d</em>), the current index (<em>i</em>), and the current group (<em>nodes</em>), with <em>this</em> as the current DOM element (<em>nodes</em>[<em>i</em>]). This method can be used to invoke arbitrary code for each selected element, and is useful for creating a context to access parent and child data simultaneously, such as:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">parent</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.child&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="sb">`child </span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://bl.ocks.org/mbostock/4c5fad723c87d2fd8273">Sized Donut Multiples</a> for an example.</p>
<p><a name="selection_call" href="#selection_call">#</a> <i>selection</i>.<b>call</b>(<i>function</i>[, <i>arguments…</i>]) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/call.js">&lt;&gt;</a></p>
<p>Invokes the specified <em>function</em> exactly once, passing in this selection along with any optional <em>arguments</em>. Returns this selection. This is equivalent to invoking the function by hand but facilitates method chaining. For example, to set several styles in a reusable function:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">name</span><span class="p">(</span><span class="nx">selection</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">last</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">selection</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;first-name&quot;</span><span class="p">,</span> <span class="nx">first</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;last-name&quot;</span><span class="p">,</span> <span class="nx">last</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now say:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Snow&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This is roughly equivalent to:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">name</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Snow&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The only difference is that <em>selection</em>.call always returns the <em>selection</em> and not the return value of the called <em>function</em>, <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<p><a name="selection_empty" href="#selection_empty">#</a> <i>selection</i>.<b>empty</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/empty.js">&lt;&gt;</a></p>
<p>Returns true if this selection contains no (non-null) elements.</p>
<p><a name="selection_nodes" href="#selection_nodes">#</a> <i>selection</i>.<b>nodes</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/nodes.js">&lt;&gt;</a></p>
<p>Returns an array of all (non-null) elements in this selection.</p>
<p><a name="selection_node" href="#selection_node">#</a> <i>selection</i>.<b>node</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/node.js">&lt;&gt;</a></p>
<p>Returns the first (non-null) element in this selection. If the selection is empty, returns null.</p>
<p><a name="selection_size" href="#selection_size">#</a> <i>selection</i>.<b>size</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/selection/size.js">&lt;&gt;</a></p>
<p>Returns the total number of elements in this selection.</p>
</div>
<div class="section" id="local-variables">
<h3>Local Variables<a class="headerlink" href="#local-variables" title="Permalink to this headline">¶</a></h3>
<p>D3 locals allow you to define local state independent of data. For instance, when rendering <a class="reference external" href="http://bl.ocks.org/mbostock/e1192fe405703d8321a5187350910e08">small multiples</a> of time-series data, you might want the same <em>x</em>-scale for all charts but distinct <em>y</em>-scales to compare the relative performance of each metric. D3 locals are scoped by DOM elements: on set, the value is stored on the given element; on get, the value is retrieved from given element or the nearest ancestor that defines it.</p>
<p><a name="local" href="#local">#</a> d3.<b>local</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/local.js">&lt;&gt;</a></p>
<p>Declares a new local variable. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">local</span><span class="p">();</span>
</pre></div>
</div>
<p>Like <code class="docutils literal notranslate"><span class="pre">var</span></code>, each local is a distinct symbolic reference; unlike <code class="docutils literal notranslate"><span class="pre">var</span></code>, the value of each local is also scoped by the DOM.</p>
<p><a name="local_set" href="#local_set">#</a> <i>local</i>.<b>set</b>(<i>node</i>, <i>value</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/local.js#L18">&lt;&gt;</a></p>
<p>Sets the value of this local on the specified <em>node</em> to the <em>value</em>, and returns the specified <em>value</em>. This is often performed using <a class="reference external" href="#selection_each"><em>selection</em>.each</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="p">});</span>
</pre></div>
</div>
<p>If you are just setting a single variable, consider using <a class="reference external" href="#selection_property"><em>selection</em>.property</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">selection</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</pre></div>
</div>
<p><a name="local_get" href="#local_get">#</a> <i>local</i>.<b>get</b>(<i>node</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/local.js#L13">&lt;&gt;</a></p>
<p>Returns the value of this local on the specified <em>node</em>. If the <em>node</em> does not define this local, returns the value from the nearest ancestor that defines it. Returns undefined if no ancestor defines this local.</p>
<p><a name="local_remove" href="#local_remove">#</a> <i>local</i>.<b>remove</b>(<i>node</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/local.js#L21">&lt;&gt;</a></p>
<p>Deletes this local’s value from the specified <em>node</em>. Returns true if the <em>node</em> defined this local prior to removal, and false otherwise. If ancestors also define this local, those definitions are unaffected, and thus <a class="reference external" href="#local_get"><em>local</em>.get</a> will still return the inherited value.</p>
<p><a name="local_toString" href="#local_toString">#</a> <i>local</i>.<b>toString</b>() <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/local.js#L24">&lt;&gt;</a></p>
<p>Returns the automatically-generated identifier for this local. This is the name of the property that is used to store the local’s value on elements, and thus you can also set or get the local’s value using <em>element</em>[<em>local</em>] or by using <a class="reference external" href="#selection_property"><em>selection</em>.property</a>.</p>
</div>
<div class="section" id="namespaces">
<h3>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
<p>XML namespaces are fun! Right? Fortunately you can mostly ignore them.</p>
<p><a name="namespace" href="#namespace">#</a> d3.<b>namespace</b>(<i>name</i>) <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/namespace.js">&lt;&gt;</a></p>
<p>Qualifies the specified <em>name</em>, which may or may not have a namespace prefix. If the name contains a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>), the substring before the colon is interpreted as the namespace prefix, which must be registered in <a class="reference external" href="#namespaces">d3.namespaces</a>. Returns an object <code class="docutils literal notranslate"><span class="pre">space</span></code> and <code class="docutils literal notranslate"><span class="pre">local</span></code> attributes describing the full namespace URL and the local name. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">d3</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;svg:text&quot;</span><span class="p">);</span> <span class="c1">// {space: &quot;http://www.w3.org/2000/svg&quot;, local: &quot;text&quot;}</span>
</pre></div>
</div>
<p>If the name does not contain a colon, this function merely returns the input name.</p>
<p><a name="namespaces" href="#namespaces">#</a> d3.<b>namespaces</b> <a class="reference external" href="https://github.com/d3/d3-selection/blob/master/src/namespaces.js">&lt;&gt;</a></p>
<p>The map of registered namespace prefixes. The initial value is:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">svg</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span>
  <span class="nx">xhtml</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">,</span>
  <span class="nx">xlink</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/1999/xlink&quot;</span><span class="p">,</span>
  <span class="nx">xml</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/XML/1998/namespace&quot;</span><span class="p">,</span>
  <span class="nx">xmlns</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/2000/xmlns/&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Additional prefixes may be assigned as needed to create elements or attributes in other namespaces.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./node_modules/d3-selection"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The FAIRplus project members<br/>
        
            &copy; Copyright 2020 (CC-BY 4.0).<br/>
          <div class="extra_footer">
            <script>mermaid.init();</script> <div class="row_footer"> This project has received funding from the <a href="https://www.imi.europa.eu/">Innovative Medicines Initiative</a> 2 Joint Undertaking under grant agreement No 802750. This Joint Undertaking receives support from the European Union’s Horizon 2020 research and innovation programme and EFPIA Companies. This communication reflects the views of the authors and neither IMI nor the European Union, EFPIA or any Associated Partners are liable for any use that may be made of the information contained herein. </div>
<div class="row_footer"> This page was created by <a href="https://github.com/jupyter/jupyter-book/graphs/contributors">The Jupyter Book Community</a> </div>
<div class="row_footer"> <div class="column" style="center"><a href="https://europa.eu/"><img src="https://raw.githubusercontent.com/FAIRplus/the-fair-cookbook/migrating/_static/images/logo/eu-flag-recolored-fairplus.png" height="20" alt="EU flag" style="float:center""></a></div> <div class="column"><a href="https://www.imi.europa.eu/"><img src="https://raw.githubusercontent.com/FAIRplus/the-fair-cookbook/migrating/_static/images/logo/imi-logo-fairplus-v1.png" height="20" alt="IMI logo" style="float:center""></a></div> <div class="column"><a href="https://efpia.eu"><img src="https://raw.githubusercontent.com/FAIRplus/the-fair-cookbook/migrating/_static/images/logo/efpia-logo-fairplus2.png" height="20" alt="EFPIA logo" style="float:center""></a></div> <br/> </div>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-171697285-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    
  </body>
</html>